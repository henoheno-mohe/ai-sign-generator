{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/components/UploadAndText.tsx"],"sourcesContent":["'use client';\n\nimport React from \"react\";\n\nexport default function UploadAndText({\n  imageDataUrl,\n  onImageChange,\n  text,\n  onTextChange,\n}: {\n  imageDataUrl: string | null;\n  onImageChange: (next: string | null) => void;\n  text: string;\n  onTextChange: (next: string) => void;\n}) {\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n  const [dragActive, setDragActive] = React.useState(false);\n\n  function handleFiles(file: File) {\n    if (!file.type.startsWith(\"image/\")) {\n      alert(\"画像ファイルを選択してください。\");\n      return;\n    }\n    if (file.size > 8 * 1024 * 1024) {\n      alert(\"ファイルサイズは8MB以下にしてください。\");\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const url = e.target?.result as string;\n      onImageChange(url);\n    };\n    reader.readAsDataURL(file);\n  }\n\n  function onDrop(e: React.DragEvent) {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    const f = e.dataTransfer.files?.[0];\n    if (f) handleFiles(f);\n  }\n\n  return (\n    <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n      <h2 className=\"text-lg font-semibold\">入力</h2>\n      <p className=\"mt-1 text-sm text-zinc-300\">手書き（単線）でも、テキストでもOK。</p>\n\n      <div className=\"mt-4 grid gap-6 sm:grid-cols-2\">\n        {/* Upload */}\n        <div>\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm font-semibold\">手書きアップロード</p>\n            {imageDataUrl && (\n              <button\n                type=\"button\"\n                onClick={() => onImageChange(null)}\n                className=\"text-xs text-zinc-300 hover:text-white\"\n              >\n                削除\n              </button>\n            )}\n          </div>\n\n          {!imageDataUrl ? (\n            <div\n              className={[\n                \"mt-2 rounded-xl border-2 border-dashed p-6 text-center transition-colors cursor-pointer\",\n                dragActive ? \"border-fuchsia-300 bg-fuchsia-300/5\" : \"border-white/15 hover:border-white/25\",\n              ].join(\" \")}\n              onDragEnter={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                setDragActive(true);\n              }}\n              onDragOver={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                setDragActive(true);\n              }}\n              onDragLeave={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                setDragActive(false);\n              }}\n              onDrop={onDrop}\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <p className=\"text-sm text-zinc-200\">ドラッグ&ドロップ</p>\n              <p className=\"mt-1 text-xs text-zinc-400\">またはクリックして画像を選択（JPG/PNG, 8MB以下）</p>\n              <p className=\"mt-3 text-xs text-zinc-400\">\n                コツ：白紙に黒ペンで描くとプレビューが見やすいです\n              </p>\n            </div>\n          ) : (\n            <div className=\"mt-2 rounded-xl border border-white/10 bg-black/30 p-2\">\n              {/* eslint-disable-next-line @next/next/no-img-element */}\n              <img\n                src={imageDataUrl}\n                alt=\"アップロード画像\"\n                className=\"h-56 w-full rounded-lg object-contain bg-black/20\"\n              />\n            </div>\n          )}\n\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\"image/*\"\n            className=\"hidden\"\n            onChange={(e) => {\n              const f = e.target.files?.[0];\n              if (f) handleFiles(f);\n            }}\n          />\n        </div>\n\n        {/* Text */}\n        <div>\n          <p className=\"text-sm font-semibold\">テキスト（任意）</p>\n          <p className=\"mt-1 text-xs text-zinc-400\">誤字防止のため、文字ネオンの場合は入力推奨。</p>\n          <textarea\n            value={text}\n            onChange={(e) => onTextChange(e.target.value)}\n            rows={6}\n            placeholder=\"例：NIGHT OWL / 推しの名前 / 好きな言葉 など\"\n            className=\"mt-2 w-full rounded-xl border border-white/10 bg-black/30 px-3 py-3 text-sm text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-300/60\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS,cAAc,EACpC,YAAY,EACZ,aAAa,EACb,IAAI,EACJ,YAAY,EAMb;IACC,MAAM,eAAe,yOAAK,CAAC,MAAM,CAAmB;IACpD,MAAM,CAAC,YAAY,cAAc,GAAG,yOAAK,CAAC,QAAQ,CAAC;IAEnD,SAAS,YAAY,IAAU;QAC7B,IAAI,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW;YACnC,MAAM;YACN;QACF;QACA,IAAI,KAAK,IAAI,GAAG,IAAI,OAAO,MAAM;YAC/B,MAAM;YACN;QACF;QACA,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG,CAAC;YACf,MAAM,MAAM,EAAE,MAAM,EAAE;YACtB,cAAc;QAChB;QACA,OAAO,aAAa,CAAC;IACvB;IAEA,SAAS,OAAO,CAAkB;QAChC,EAAE,cAAc;QAChB,EAAE,eAAe;QACjB,cAAc;QACd,MAAM,IAAI,EAAE,YAAY,CAAC,KAAK,EAAE,CAAC,EAAE;QACnC,IAAI,GAAG,YAAY;IACrB;IAEA,qBACE,uQAAC;QAAI,WAAU;;0BACb,uQAAC;gBAAG,WAAU;0BAAwB;;;;;;0BACtC,uQAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAE1C,uQAAC;gBAAI,WAAU;;kCAEb,uQAAC;;0CACC,uQAAC;gCAAI,WAAU;;kDACb,uQAAC;wCAAE,WAAU;kDAAwB;;;;;;oCACpC,8BACC,uQAAC;wCACC,MAAK;wCACL,SAAS,IAAM,cAAc;wCAC7B,WAAU;kDACX;;;;;;;;;;;;4BAMJ,CAAC,6BACA,uQAAC;gCACC,WAAW;oCACT;oCACA,aAAa,wCAAwC;iCACtD,CAAC,IAAI,CAAC;gCACP,aAAa,CAAC;oCACZ,EAAE,cAAc;oCAChB,EAAE,eAAe;oCACjB,cAAc;gCAChB;gCACA,YAAY,CAAC;oCACX,EAAE,cAAc;oCAChB,EAAE,eAAe;oCACjB,cAAc;gCAChB;gCACA,aAAa,CAAC;oCACZ,EAAE,cAAc;oCAChB,EAAE,eAAe;oCACjB,cAAc;gCAChB;gCACA,QAAQ;gCACR,SAAS,IAAM,aAAa,OAAO,EAAE;;kDAErC,uQAAC;wCAAE,WAAU;kDAAwB;;;;;;kDACrC,uQAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,uQAAC;wCAAE,WAAU;kDAA6B;;;;;;;;;;;qDAK5C,uQAAC;gCAAI,WAAU;0CAEb,cAAA,uQAAC;oCACC,KAAK;oCACL,KAAI;oCACJ,WAAU;;;;;;;;;;;0CAKhB,uQAAC;gCACC,KAAK;gCACL,MAAK;gCACL,QAAO;gCACP,WAAU;gCACV,UAAU,CAAC;oCACT,MAAM,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;oCAC7B,IAAI,GAAG,YAAY;gCACrB;;;;;;;;;;;;kCAKJ,uQAAC;;0CACC,uQAAC;gCAAE,WAAU;0CAAwB;;;;;;0CACrC,uQAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAC1C,uQAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;gCAC5C,MAAM;gCACN,aAAY;gCACZ,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtB"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/components/ColorPicker14Dynamic.tsx"],"sourcesContent":["'use client';\n\nimport React from \"react\";\nimport type { NeonColor } from \"@/lib/palette\";\n\nexport default function ColorPicker14Dynamic({\n  palette,\n  colors,\n  onChange,\n  maxColors = 5,\n}: {\n  palette: NeonColor[];\n  colors: NeonColor[]; // length = colorCount (1..maxColors)\n  onChange: (next: NeonColor[]) => void;\n  maxColors?: number;\n}) {\n  const [activeIndex, setActiveIndex] = React.useState(0);\n\n  React.useEffect(() => {\n    if (activeIndex > colors.length - 1) setActiveIndex(colors.length - 1);\n  }, [activeIndex, colors.length]);\n\n  function setSlotColor(idx: number, color: NeonColor) {\n    const next = colors.slice();\n    next[idx] = color;\n    onChange(next);\n  }\n\n  return (\n    <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n      <div className=\"flex items-end justify-between gap-4\">\n        <div>\n          <h2 className=\"text-lg font-semibold\">色（14色パレット）</h2>\n          <p className=\"mt-1 text-sm text-zinc-300\">\n            まず色数を決めて、同じ数だけ色を選びます（上限{maxColors}色）。\n          </p>\n        </div>\n        <div className=\"text-xs text-zinc-400\">選択中: {slotLabel(activeIndex)}</div>\n      </div>\n\n      <div className=\"mt-4 grid gap-3 sm:grid-cols-5\">\n        {colors.map((c, idx) => (\n          <SlotButton\n            key={idx}\n            label={slotLabel(idx)}\n            color={c}\n            active={idx === activeIndex}\n            onClick={() => setActiveIndex(idx)}\n          />\n        ))}\n      </div>\n\n      <div className=\"mt-5 grid grid-cols-7 gap-2\">\n        {palette.map((c) => (\n          <button\n            key={c.id}\n            type=\"button\"\n            onClick={() => setSlotColor(activeIndex, c)}\n            className=\"group relative h-9 w-9 rounded-lg border border-white/10 hover:border-white/25 transition-colors\"\n            title={`${c.name} (${c.hex})`}\n          >\n            <span\n              className=\"absolute inset-0 rounded-lg\"\n              style={{\n                backgroundColor: c.hex,\n                boxShadow: `0 0 0 1px rgba(0,0,0,0.25) inset, 0 0 18px ${c.hex}55`,\n              }}\n            />\n            <span className=\"sr-only\">{c.name}</span>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction SlotButton({\n  label,\n  color,\n  active,\n  onClick,\n}: {\n  label: string;\n  color: NeonColor;\n  active: boolean;\n  onClick: () => void;\n}) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={[\n        \"rounded-xl border px-3 py-3 text-left transition-colors\",\n        active ? \"border-white/30 bg-white/10\" : \"border-white/10 bg-white/5 hover:border-white/20\",\n      ].join(\" \")}\n    >\n      <div className=\"flex items-center justify-between gap-3\">\n        <div className=\"min-w-0\">\n          <p className=\"text-xs text-zinc-400\">{label}</p>\n          <p className=\"mt-0.5 truncate text-sm font-semibold\">{color.name}</p>\n        </div>\n        <span\n          className=\"h-7 w-7 rounded-lg border border-white/10\"\n          style={{ backgroundColor: color.hex, boxShadow: `0 0 14px ${color.hex}66` }}\n        />\n      </div>\n    </button>\n  );\n}\n\nfunction slotLabel(idx: number) {\n  if (idx === 0) return \"主色\";\n  return `アクセント${idx}`;\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKe,SAAS,qBAAqB,EAC3C,OAAO,EACP,MAAM,EACN,QAAQ,EACR,YAAY,CAAC,EAMd;IACC,MAAM,CAAC,aAAa,eAAe,GAAG,yOAAK,CAAC,QAAQ,CAAC;IAErD,yOAAK,CAAC,SAAS,CAAC;QACd,IAAI,cAAc,OAAO,MAAM,GAAG,GAAG,eAAe,OAAO,MAAM,GAAG;IACtE,GAAG;QAAC;QAAa,OAAO,MAAM;KAAC;IAE/B,SAAS,aAAa,GAAW,EAAE,KAAgB;QACjD,MAAM,OAAO,OAAO,KAAK;QACzB,IAAI,CAAC,IAAI,GAAG;QACZ,SAAS;IACX;IAEA,qBACE,uQAAC;QAAI,WAAU;;0BACb,uQAAC;gBAAI,WAAU;;kCACb,uQAAC;;0CACC,uQAAC;gCAAG,WAAU;0CAAwB;;;;;;0CACtC,uQAAC;gCAAE,WAAU;;oCAA6B;oCAChB;oCAAU;;;;;;;;;;;;;kCAGtC,uQAAC;wBAAI,WAAU;;4BAAwB;4BAAM,UAAU;;;;;;;;;;;;;0BAGzD,uQAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,GAAG,oBACd,uQAAC;wBAEC,OAAO,UAAU;wBACjB,OAAO;wBACP,QAAQ,QAAQ;wBAChB,SAAS,IAAM,eAAe;uBAJzB;;;;;;;;;;0BASX,uQAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,kBACZ,uQAAC;wBAEC,MAAK;wBACL,SAAS,IAAM,aAAa,aAAa;wBACzC,WAAU;wBACV,OAAO,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;;0CAE7B,uQAAC;gCACC,WAAU;gCACV,OAAO;oCACL,iBAAiB,EAAE,GAAG;oCACtB,WAAW,CAAC,2CAA2C,EAAE,EAAE,GAAG,CAAC,EAAE,CAAC;gCACpE;;;;;;0CAEF,uQAAC;gCAAK,WAAU;0CAAW,EAAE,IAAI;;;;;;;uBAb5B,EAAE,EAAE;;;;;;;;;;;;;;;;AAmBrB;AAEA,SAAS,WAAW,EAClB,KAAK,EACL,KAAK,EACL,MAAM,EACN,OAAO,EAMR;IACC,qBACE,uQAAC;QACC,MAAK;QACL,SAAS;QACT,WAAW;YACT;YACA,SAAS,gCAAgC;SAC1C,CAAC,IAAI,CAAC;kBAEP,cAAA,uQAAC;YAAI,WAAU;;8BACb,uQAAC;oBAAI,WAAU;;sCACb,uQAAC;4BAAE,WAAU;sCAAyB;;;;;;sCACtC,uQAAC;4BAAE,WAAU;sCAAyC,MAAM,IAAI;;;;;;;;;;;;8BAElE,uQAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,iBAAiB,MAAM,GAAG;wBAAE,WAAW,CAAC,SAAS,EAAE,MAAM,GAAG,CAAC,EAAE,CAAC;oBAAC;;;;;;;;;;;;;;;;;AAKpF;AAEA,SAAS,UAAU,GAAW;IAC5B,IAAI,QAAQ,GAAG,OAAO;IACtB,OAAO,CAAC,KAAK,EAAE,KAAK;AACtB"}},
    {"offset": {"line": 438, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/components/NeonPreviewGrid.tsx"],"sourcesContent":["'use client';\n\nimport React from \"react\";\nimport type { BackgroundTemplate } from \"@/lib/backgrounds\";\nimport type { SelectedColors } from \"@/components/ColorPicker24\";\n\nexport default function NeonPreviewGrid({\n  templates,\n  text,\n  sketchDataUrl,\n  colors,\n  aiImageDataUrl,\n}: {\n  templates: BackgroundTemplate[];\n  text: string;\n  sketchDataUrl: string | null;\n  colors: SelectedColors;\n  aiImageDataUrl?: string | null;\n}) {\n  if (!aiImageDataUrl) return null;\n\n  return (\n    <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n      <div className=\"flex items-end justify-between gap-4\">\n        <div>\n          <h2 className=\"text-lg font-semibold\">設置イメージ</h2>\n          <p className=\"mt-1 text-sm text-zinc-300\">\n            AI生成のリアル設置イメージです。\n          </p>\n        </div>\n      </div>\n\n      <div className=\"mt-4 grid gap-4 sm:grid-cols-1\">\n        {templates.map((t) => (\n          <div key={t.id} className=\"rounded-2xl border border-white/10 overflow-hidden\">\n            <div className=\"bg-black/30\">\n              {/* AI生成画像は「切れない」表示にする：固定高さをやめて、画像サイズに合わせて可変 */}\n              {/* eslint-disable-next-line @next/next/no-img-element */}\n              <img\n                src={aiImageDataUrl}\n                alt=\"AI生成の設置イメージ\"\n                className=\"block w-full h-auto\"\n                style={{ maxHeight: \"75vh\", objectFit: \"contain\" }}\n              />\n            </div>\n            <div className=\"p-3\">\n              <p className=\"text-sm font-semibold text-white\">{t.name}</p>\n              <p className=\"mt-1 text-xs text-zinc-300\">{t.description}</p>\n              <p className=\"mt-1 text-[11px] text-zinc-400\">\n                AI生成のリアル設置イメージ\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAAA;;AAMe,SAAS,gBAAgB,EACtC,SAAS,EACT,IAAI,EACJ,aAAa,EACb,MAAM,EACN,cAAc,EAOf;IACC,IAAI,CAAC,gBAAgB,OAAO;IAE5B,qBACE,uQAAC;QAAI,WAAU;;0BACb,uQAAC;gBAAI,WAAU;0BACb,cAAA,uQAAC;;sCACC,uQAAC;4BAAG,WAAU;sCAAwB;;;;;;sCACtC,uQAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;;;;;;0BAM9C,uQAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,kBACd,uQAAC;wBAAe,WAAU;;0CACxB,uQAAC;gCAAI,WAAU;0CAGb,cAAA,uQAAC;oCACC,KAAK;oCACL,KAAI;oCACJ,WAAU;oCACV,OAAO;wCAAE,WAAW;wCAAQ,WAAW;oCAAU;;;;;;;;;;;0CAGrD,uQAAC;gCAAI,WAAU;;kDACb,uQAAC;wCAAE,WAAU;kDAAoC,EAAE,IAAI;;;;;;kDACvD,uQAAC;wCAAE,WAAU;kDAA8B,EAAE,WAAW;;;;;;kDACxD,uQAAC;wCAAE,WAAU;kDAAiC;;;;;;;;;;;;;uBAdxC,EAAE,EAAE;;;;;;;;;;;;;;;;AAuBxB"}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/lib/palette.ts"],"sourcesContent":["export type NeonColor = {\n  id: string;\n  name: string;\n  hex: `#${string}`;\n};\n\n// Neon palette (14 colors) based on provided \"カラーバリエーション\" chart\n// - whites (4): cool/off/warm/lamp-orange\n// - colors (10): red, pink, rose, purple, blue, sky blue, green, lemon yellow, yellow, orange\nexport const NEON_PALETTE_14: NeonColor[] = [\n  // whites\n  { id: \"cool-white-8000k\", name: \"クールホワイト（8000K相当）\", hex: \"#EAF3FF\" },\n  { id: \"off-white-6000k\", name: \"オフホワイト（6000K相当）\", hex: \"#F6F7F4\" },\n  { id: \"warm-white-4000k\", name: \"ウォームホワイト（4000K相当）\", hex: \"#FFF1D6\" },\n  { id: \"lamp-orange-3000k\", name: \"ランプオレンジ（3000K相当）\", hex: \"#FFD1A3\" },\n\n  // colors\n  { id: \"red\", name: \"red\", hex: \"#FF1744\" },\n  { id: \"pink\", name: \"pink\", hex: \"#FF2DAA\" },\n  { id: \"rose\", name: \"rose\", hex: \"#FF4DFF\" },\n  { id: \"purple\", name: \"purple\", hex: \"#8A2BFF\" },\n  { id: \"blue\", name: \"blue\", hex: \"#2D5BFF\" },\n  { id: \"sky-blue\", name: \"sky blue\", hex: \"#00E5FF\" },\n  { id: \"green\", name: \"green\", hex: \"#39FF14\" },\n  { id: \"lemon-yellow\", name: \"lemon yellow\", hex: \"#FFF200\" },\n  { id: \"yellow\", name: \"yellow\", hex: \"#FFB000\" },\n  { id: \"orange\", name: \"orange\", hex: \"#FF6A00\" }\n];\n\n\n"],"names":[],"mappings":";;;;AASO,MAAM,kBAA+B;IAC1C,SAAS;IACT;QAAE,IAAI;QAAoB,MAAM;QAAoB,KAAK;IAAU;IACnE;QAAE,IAAI;QAAmB,MAAM;QAAmB,KAAK;IAAU;IACjE;QAAE,IAAI;QAAoB,MAAM;QAAqB,KAAK;IAAU;IACpE;QAAE,IAAI;QAAqB,MAAM;QAAoB,KAAK;IAAU;IAEpE,SAAS;IACT;QAAE,IAAI;QAAO,MAAM;QAAO,KAAK;IAAU;IACzC;QAAE,IAAI;QAAQ,MAAM;QAAQ,KAAK;IAAU;IAC3C;QAAE,IAAI;QAAQ,MAAM;QAAQ,KAAK;IAAU;IAC3C;QAAE,IAAI;QAAU,MAAM;QAAU,KAAK;IAAU;IAC/C;QAAE,IAAI;QAAQ,MAAM;QAAQ,KAAK;IAAU;IAC3C;QAAE,IAAI;QAAY,MAAM;QAAY,KAAK;IAAU;IACnD;QAAE,IAAI;QAAS,MAAM;QAAS,KAAK;IAAU;IAC7C;QAAE,IAAI;QAAgB,MAAM;QAAgB,KAAK;IAAU;IAC3D;QAAE,IAAI;QAAU,MAAM;QAAU,KAAK;IAAU;IAC/C;QAAE,IAAI;QAAU,MAAM;QAAU,KAAK;IAAU;CAChD"}},
    {"offset": {"line": 643, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/lib/backgrounds.ts"],"sourcesContent":["export type BackgroundTemplate = {\n  id: \"brick\" | \"whitewall\" | \"concrete\";\n  name: string;\n  description: string;\n  className: string; // Tailwind-compatible utility string\n};\n\nexport const BACKGROUND_TEMPLATES: BackgroundTemplate[] = [\n  {\n    id: \"brick\",\n    name: \"レンガ\",\n    description: \"バー/ゲーム部屋っぽい\",\n    className:\n      \"bg-[radial-gradient(circle_at_20%_20%,rgba(255,255,255,0.08),transparent_45%),repeating-linear-gradient(0deg,rgba(255,255,255,0.06),rgba(255,255,255,0.06)_2px,transparent_2px,transparent_24px),repeating-linear-gradient(90deg,rgba(255,255,255,0.05),rgba(255,255,255,0.05)_2px,transparent_2px,transparent_48px)] bg-[#2a1b13]\"\n  },\n  {\n    id: \"whitewall\",\n    name: \"白壁\",\n    description: \"部屋/ギフトに合わせやすい\",\n    className:\n      \"bg-[radial-gradient(circle_at_30%_20%,rgba(0,0,0,0.04),transparent_45%),linear-gradient(180deg,#f7f7f7,#eaeaea)]\"\n  },\n  {\n    id: \"concrete\",\n    name: \"コンクリ\",\n    description: \"クール/都会っぽい\",\n    className:\n      \"bg-[radial-gradient(circle_at_30%_25%,rgba(255,255,255,0.10),transparent_55%),repeating-linear-gradient(45deg,rgba(255,255,255,0.06),rgba(255,255,255,0.06)_2px,transparent_2px,transparent_18px)] bg-[#35393f]\"\n  }\n];\n\n// MVP: 設置イメージは1枚でOK（白壁をデフォルトにする）\nexport const DEFAULT_BACKGROUND_ID: BackgroundTemplate[\"id\"] = \"whitewall\";\n\nexport function getDefaultBackground(): BackgroundTemplate {\n  return BACKGROUND_TEMPLATES.find((t) => t.id === DEFAULT_BACKGROUND_ID) ?? BACKGROUND_TEMPLATES[0];\n}\n\n\n"],"names":[],"mappings":";;;;;;;;AAOO,MAAM,uBAA6C;IACxD;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,WACE;IACJ;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,WACE;IACJ;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,WACE;IACJ;CACD;AAGM,MAAM,wBAAkD;AAExD,SAAS;IACd,OAAO,qBAAqB,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,0BAA0B,oBAAoB,CAAC,EAAE;AACpG"}},
    {"offset": {"line": 679, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/lib/neonProtocol.ts"],"sourcesContent":["import type { BackgroundTemplate } from \"@/lib/backgrounds\";\nimport type { NeonColor } from \"@/lib/palette\";\n\n/**\n * Neon Sign Protocol (v1)\n * 目的: 「いわゆるネオンサイン」の実物仕上がりに寄せた生成指示を統一する\n *\n * 前提（ユーザー要件）\n * - 屋内限定\n * - 単線（1本チューブ表現）\n * - 発光幅: φ5 / φ7 / φ9 mm のネオンチューブで構成\n * - 透明アクリルパネルで挟み込み（表裏） + 四隅スタンドオフ金具\n * - 14色パレットから最大3色（主色1＋アクセント2）\n */\n\nexport type TubeDiameter = 5 | 7 | 9;\n\nexport const NEON_PROTOCOL_V1 = {\n  productName: \"屋内ネオンサイン（アクリルパネル挟み込み）\",\n  tubeDiameters: [5, 7, 9] as const,\n  defaultTubeDiameter: 7 as const,\n  maxColors: 3,\n  paletteSize: 14,\n} as const;\n\nexport function buildNeonPrompt({\n  userText,\n  colors,\n  background,\n  widthMm,\n  tubeDiameter,\n}: {\n  userText: string;\n  colors: NeonColor[]; // 1..5\n  background: BackgroundTemplate;\n  widthMm: number; // target overall width in mm\n  tubeDiameter: TubeDiameter;\n}) {\n  const text = userText.trim();\n  const colorList = colors\n    .slice(0, 5)\n    .map((c, i) => `- Color ${i + 1}: ${c.name} (${c.hex})`)\n    .join(\"\\n\");\n  const targetWidth = Math.max(200, Math.min(2000, Math.round(widthMm)));\n\n  // 画像生成モデル向けに、英語で「商品写真っぽさ」を強く指示（日本語だけより安定しやすい）\n  return `CRITICAL TASK:\nGenerate a photorealistic product photo of an indoor neon sign installation (NOT a mockup illustration).\n\nSCENE (DEFAULT):\n- Night-time indoor scene.\n- Warm ambient lighting (approx 2700K–3000K). Cozy warm tone.\n- The neon sign should be the main highlight light source, with soft warm room fill.\n\nPRODUCT MUST MATCH:\n- LED neon flex / neon tube sign, single-stroke look, uniform tube thickness.\n- Tube diameter / glow width: approximately φ${tubeDiameter}mm.\n- Mounted using clear acrylic panels (front + back acrylic sandwich).\n- Visible standoff hardware: 4 round standoff caps / screws at the corners.\n- The acrylic panel is slightly offset from the wall, with subtle realistic shadows.\n- Real-world scale: the overall sign width should be approximately ${targetWidth}mm.\n- Height should be auto-determined by the design (logo/text) while keeping natural proportions.\n- Acrylic panel size should fit the design with reasonable margins (do not crop the design).\n\nLIGHTING:\n- Realistic neon glow + soft halo on the wall.\n- NO excessive lens flare, NO fake bokeh, keep it like a clean product photo.\n- Keep colors accurate and vivid, but not oversaturated.\n- Keep the wall and room lighting warm (night warm ambience), matching the scene requirements.\n- The neon tube MUST look emissive: bright luminous core + diffused outer glow.\n- IMPORTANT: Do NOT look like printed/painted lines on acrylic. It must be a real glowing tube.\n\nCOLOR RULES (use ONLY these 3 colors; distribution is up to you):\nCOLOR RULES (use ONLY these colors; do not introduce any additional colors):\n${colorList}\n\nBACKGROUND:\n- Use this wall style: ${background.name} (${background.description})\n- Warm indoor wall lighting, realistic texture, subtle noise/grain like a real camera photo.\n\nDO NOT:\n- Do not change the content/shape provided by the input (no redesign).\n- Do not turn it into channel letters or box letters.\n- Do not add extra objects (bulbs, random decorations, unrelated logos).\n\nOUTPUT:\n- One realistic installed neon sign photo on the wall.\n${text ? `\\nTEXT (optional input, keep exact):\\n${text}\\n` : \"\"}`.trim();\n}\n\n\n"],"names":[],"mappings":";;;;;;AAiBO,MAAM,mBAAmB;IAC9B,aAAa;IACb,eAAe;QAAC;QAAG;QAAG;KAAE;IACxB,qBAAqB;IACrB,WAAW;IACX,aAAa;AACf;AAEO,SAAS,gBAAgB,EAC9B,QAAQ,EACR,MAAM,EACN,UAAU,EACV,OAAO,EACP,YAAY,EAOb;IACC,MAAM,OAAO,SAAS,IAAI;IAC1B,MAAM,YAAY,OACf,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC,EACtD,IAAI,CAAC;IACR,MAAM,cAAc,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,MAAM,KAAK,KAAK,CAAC;IAE5D,8CAA8C;IAC9C,OAAO,CAAC;;;;;;;;;;6CAUmC,EAAE,aAAa;;;;mEAIO,EAAE,YAAY;;;;;;;;;;;;;;AAcjF,EAAE,UAAU;;;uBAGW,EAAE,WAAW,IAAI,CAAC,EAAE,EAAE,WAAW,WAAW,CAAC;;;;;;;;;;AAUpE,EAAE,OAAO,CAAC,sCAAsC,EAAE,KAAK,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI;AACtE"}},
    {"offset": {"line": 748, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/lib/quote.ts"],"sourcesContent":["export const SAMPLE_WIDTH_MM = 1000; // 100cm\nexport const SAMPLE_PRICE_YEN_EX_TAX = 82400;\n\n// 固定単価（円/cm）\n// 既知データ: 横幅100cmのサンプルで、チューブ長=11m(=1100cm)、価格=82,400円（税別）\n// => 82,400 / 1,100 = 74.9... ≒ 75円/cm\nexport const FIXED_YEN_PER_CM_TUBE = 75;\n\nexport function estimatePriceYenExTaxFromTubeLength(\n  tubeLengthCm: number,\n  unitYenPerCm: number\n): number {\n  const safeLen = Math.max(0, tubeLengthCm);\n  const safeUnit = Math.max(0, unitYenPerCm);\n  return Math.round(safeLen * safeUnit);\n}\n\nexport function formatYen(n: number): string {\n  return new Intl.NumberFormat(\"ja-JP\").format(Math.round(n));\n}\n\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,MAAM,kBAAkB,MAAM,QAAQ;AACtC,MAAM,0BAA0B;AAKhC,MAAM,wBAAwB;AAE9B,SAAS,oCACd,YAAoB,EACpB,YAAoB;IAEpB,MAAM,UAAU,KAAK,GAAG,CAAC,GAAG;IAC5B,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG;IAC7B,OAAO,KAAK,KAAK,CAAC,UAAU;AAC9B;AAEO,SAAS,UAAU,CAAS;IACjC,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC,KAAK,KAAK,CAAC;AAC1D"}},
    {"offset": {"line": 775, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/lib/lineLength.ts"],"sourcesContent":["export type LineLengthEstimate = {\n  bboxWidthPx: number;\n  bboxHeightPx: number;\n  skeletonLengthPx: number;\n  tubeLengthCm: number;\n};\n\ntype Binary = Uint8Array; // 0 or 1\n\nfunction clamp(n: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, n));\n}\n\nfunction loadImage(dataUrl: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = (e) => reject(e);\n    img.src = dataUrl;\n  });\n}\n\nfunction toGrayscaleAndBinarize(\n  ctx: CanvasRenderingContext2D,\n  w: number,\n  h: number,\n  threshold: number\n): Binary {\n  const img = ctx.getImageData(0, 0, w, h);\n  const d = img.data;\n  const out = new Uint8Array(w * h);\n  for (let i = 0, p = 0; i < d.length; i += 4, p++) {\n    const r = d[i];\n    const g = d[i + 1];\n    const b = d[i + 2];\n    const a = d[i + 3];\n    if (a < 16) {\n      out[p] = 0;\n      continue;\n    }\n    // perceptual luminance\n    const y = 0.2126 * r + 0.7152 * g + 0.0722 * b;\n    // assume dark strokes on light paper; invert if necessary later\n    out[p] = y < threshold ? 1 : 0;\n  }\n  return out;\n}\n\nfunction invertIfMostlyOn(binary: Binary) {\n  let on = 0;\n  for (let i = 0; i < binary.length; i++) on += binary[i];\n  // if more than 50% pixels are \"on\", likely inverted background; invert\n  if (on > binary.length * 0.5) {\n    for (let i = 0; i < binary.length; i++) binary[i] = binary[i] ? 0 : 1;\n  }\n}\n\nfunction computeBBox(binary: Binary, w: number, h: number) {\n  let minX = w,\n    minY = h,\n    maxX = -1,\n    maxY = -1;\n  for (let y = 0; y < h; y++) {\n    for (let x = 0; x < w; x++) {\n      if (binary[y * w + x]) {\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n      }\n    }\n  }\n  if (maxX < 0) return null;\n  return { minX, minY, maxX, maxY, width: maxX - minX + 1, height: maxY - minY + 1 };\n}\n\n// Zhang-Suen thinning (binary image: 1=foreground)\nfunction zhangSuenThinning(binary: Binary, w: number, h: number): Binary {\n  const img = new Uint8Array(binary); // copy\n  const neighbors = (x: number, y: number) => {\n    const p2 = img[(y - 1) * w + x];\n    const p3 = img[(y - 1) * w + (x + 1)];\n    const p4 = img[y * w + (x + 1)];\n    const p5 = img[(y + 1) * w + (x + 1)];\n    const p6 = img[(y + 1) * w + x];\n    const p7 = img[(y + 1) * w + (x - 1)];\n    const p8 = img[y * w + (x - 1)];\n    const p9 = img[(y - 1) * w + (x - 1)];\n    return [p2, p3, p4, p5, p6, p7, p8, p9] as const;\n  };\n\n  let changed = true;\n  const toDelete: number[] = [];\n  while (changed) {\n    changed = false;\n    toDelete.length = 0;\n    // step 1\n    for (let y = 1; y < h - 1; y++) {\n      for (let x = 1; x < w - 1; x++) {\n        const idx = y * w + x;\n        if (img[idx] !== 1) continue;\n        const [p2, p3, p4, p5, p6, p7, p8, p9] = neighbors(x, y);\n        const bp = p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;\n        if (bp < 2 || bp > 6) continue;\n        const ap =\n          (p2 === 0 && p3 === 1 ? 1 : 0) +\n          (p3 === 0 && p4 === 1 ? 1 : 0) +\n          (p4 === 0 && p5 === 1 ? 1 : 0) +\n          (p5 === 0 && p6 === 1 ? 1 : 0) +\n          (p6 === 0 && p7 === 1 ? 1 : 0) +\n          (p7 === 0 && p8 === 1 ? 1 : 0) +\n          (p8 === 0 && p9 === 1 ? 1 : 0) +\n          (p9 === 0 && p2 === 1 ? 1 : 0);\n        if (ap !== 1) continue;\n        if (p2 * p4 * p6 !== 0) continue;\n        if (p4 * p6 * p8 !== 0) continue;\n        toDelete.push(idx);\n      }\n    }\n    if (toDelete.length) {\n      changed = true;\n      for (const idx of toDelete) img[idx] = 0;\n    }\n\n    toDelete.length = 0;\n    // step 2\n    for (let y = 1; y < h - 1; y++) {\n      for (let x = 1; x < w - 1; x++) {\n        const idx = y * w + x;\n        if (img[idx] !== 1) continue;\n        const [p2, p3, p4, p5, p6, p7, p8, p9] = neighbors(x, y);\n        const bp = p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;\n        if (bp < 2 || bp > 6) continue;\n        const ap =\n          (p2 === 0 && p3 === 1 ? 1 : 0) +\n          (p3 === 0 && p4 === 1 ? 1 : 0) +\n          (p4 === 0 && p5 === 1 ? 1 : 0) +\n          (p5 === 0 && p6 === 1 ? 1 : 0) +\n          (p6 === 0 && p7 === 1 ? 1 : 0) +\n          (p7 === 0 && p8 === 1 ? 1 : 0) +\n          (p8 === 0 && p9 === 1 ? 1 : 0) +\n          (p9 === 0 && p2 === 1 ? 1 : 0);\n        if (ap !== 1) continue;\n        if (p2 * p4 * p8 !== 0) continue;\n        if (p2 * p6 * p8 !== 0) continue;\n        toDelete.push(idx);\n      }\n    }\n    if (toDelete.length) {\n      changed = true;\n      for (const idx of toDelete) img[idx] = 0;\n    }\n  }\n  return img;\n}\n\nfunction skeletonLengthPx(skel: Binary, w: number, h: number) {\n  let length = 0;\n  const sqrt2 = Math.SQRT2;\n  for (let y = 0; y < h; y++) {\n    for (let x = 0; x < w; x++) {\n      const idx = y * w + x;\n      if (!skel[idx]) continue;\n      // count edges to avoid double counting: right, down, down-right, down-left\n      if (x + 1 < w && skel[y * w + (x + 1)]) length += 1;\n      if (y + 1 < h && skel[(y + 1) * w + x]) length += 1;\n      if (x + 1 < w && y + 1 < h && skel[(y + 1) * w + (x + 1)]) length += sqrt2;\n      if (x - 1 >= 0 && y + 1 < h && skel[(y + 1) * w + (x - 1)]) length += sqrt2;\n    }\n  }\n  // fallback if too sparse (e.g. single pixels), approximate by count\n  if (length < 1) {\n    let cnt = 0;\n    for (let i = 0; i < skel.length; i++) cnt += skel[i];\n    length = cnt;\n  }\n  return length;\n}\n\nexport async function estimateTubeLengthCmFromSketch({\n  sketchDataUrl,\n  targetWidthMm,\n  fillRatio = 0.9,\n  threshold = 210,\n  maxDim = 1024,\n}: {\n  sketchDataUrl: string;\n  targetWidthMm: number;\n  fillRatio?: number;\n  threshold?: number;\n  maxDim?: number;\n}): Promise<LineLengthEstimate> {\n  const img = await loadImage(sketchDataUrl);\n  const srcW = img.naturalWidth || img.width;\n  const srcH = img.naturalHeight || img.height;\n  const scale = Math.min(1, maxDim / Math.max(srcW, srcH));\n  const w = Math.max(1, Math.round(srcW * scale));\n  const h = Math.max(1, Math.round(srcH * scale));\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = w;\n  canvas.height = h;\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new Error(\"Canvas not available\");\n  ctx.fillStyle = \"white\";\n  ctx.fillRect(0, 0, w, h);\n  ctx.drawImage(img, 0, 0, w, h);\n\n  const bin = toGrayscaleAndBinarize(ctx, w, h, threshold);\n  invertIfMostlyOn(bin);\n  const bbox = computeBBox(bin, w, h);\n  if (!bbox) {\n    return { bboxWidthPx: 0, bboxHeightPx: 0, skeletonLengthPx: 0, tubeLengthCm: 0 };\n  }\n\n  const skel = zhangSuenThinning(bin, w, h);\n  const lenPx = skeletonLengthPx(skel, w, h);\n\n  const widthMm = clamp(targetWidthMm, 200, 2000);\n  const bboxWidthPx = Math.max(1, bbox.width);\n  const mmPerPx = (widthMm * fillRatio) / bboxWidthPx;\n  const tubeLengthMm = lenPx * mmPerPx;\n  const tubeLengthCm = tubeLengthMm / 10;\n\n  return {\n    bboxWidthPx: bbox.width,\n    bboxHeightPx: bbox.height,\n    skeletonLengthPx: lenPx,\n    tubeLengthCm,\n  };\n}\n\nfunction luminanceOf(r: number, g: number, b: number) {\n  return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nfunction percentile(values: Float32Array, p: number) {\n  const arr = Array.from(values);\n  arr.sort((a, b) => a - b);\n  const idx = clamp(Math.floor((arr.length - 1) * p), 0, arr.length - 1);\n  return arr[idx];\n}\n\nfunction toBrightMask(\n  ctx: CanvasRenderingContext2D,\n  w: number,\n  h: number,\n  pctl: number\n): Binary {\n  const img = ctx.getImageData(0, 0, w, h);\n  const d = img.data;\n  const Y = new Float32Array(w * h);\n  for (let i = 0, p = 0; i < d.length; i += 4, p++) {\n    const a = d[i + 3];\n    if (a < 16) {\n      Y[p] = 0;\n      continue;\n    }\n    Y[p] = luminanceOf(d[i], d[i + 1], d[i + 2]);\n  }\n  const thr = percentile(Y, pctl); // e.g. 85th percentile\n  const out = new Uint8Array(w * h);\n  for (let p = 0; p < Y.length; p++) {\n    // keep only the brightest pixels (neon/glow)\n    out[p] = Y[p] >= thr ? 1 : 0;\n  }\n  return out;\n}\n\n/**\n * ネオン“写真”からチューブ長を推定（AI生成結果やサンプル商品写真向け）\n * - 明るい発光部分を抽出 → 細線化 → 総延長(px) → 横幅(mm)でスケール換算\n * NOTE: 写真はハローで太く見えるので、細線化して中心線化する。\n */\nexport async function estimateTubeLengthCmFromNeonPhoto({\n  imageDataUrl,\n  targetWidthMm,\n  brightPercentile = 0.85,\n  maxDim = 1024,\n}: {\n  imageDataUrl: string;\n  targetWidthMm: number;\n  brightPercentile?: number; // 0..1\n  maxDim?: number;\n}): Promise<LineLengthEstimate> {\n  const img = await loadImage(imageDataUrl);\n  const srcW = img.naturalWidth || img.width;\n  const srcH = img.naturalHeight || img.height;\n  const scale = Math.min(1, maxDim / Math.max(srcW, srcH));\n  const w = Math.max(1, Math.round(srcW * scale));\n  const h = Math.max(1, Math.round(srcH * scale));\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = w;\n  canvas.height = h;\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new Error(\"Canvas not available\");\n  ctx.drawImage(img, 0, 0, w, h);\n\n  const bin = toBrightMask(ctx, w, h, clamp(brightPercentile, 0.5, 0.98));\n  const bbox = computeBBox(bin, w, h);\n  if (!bbox) {\n    return { bboxWidthPx: 0, bboxHeightPx: 0, skeletonLengthPx: 0, tubeLengthCm: 0 };\n  }\n\n  const skel = zhangSuenThinning(bin, w, h);\n  const lenPx = skeletonLengthPx(skel, w, h);\n\n  const widthMm = clamp(targetWidthMm, 200, 2000);\n  // 基準は「アクリル板の外寸（全体幅）」= targetWidthMm\n  // 画像からアクリル板の外寸幅(px)を推定する。\n  // 方針: 四隅スタンドオフ金具は暗い円として写りやすいので、各コーナー領域の最暗点を拾い、横幅を推定。\n  const panelWidthPx = estimatePanelWidthPxFromStandoffs(ctx, w, h) ?? Math.round(w * 0.9);\n  const mmPerPx = widthMm / Math.max(1, panelWidthPx);\n  const tubeLengthMm = lenPx * mmPerPx;\n  const tubeLengthCm = tubeLengthMm / 10;\n\n  return {\n    bboxWidthPx: bbox.width,\n    bboxHeightPx: bbox.height,\n    skeletonLengthPx: lenPx,\n    tubeLengthCm,\n  };\n}\n\nfunction estimatePanelWidthPxFromStandoffs(ctx: CanvasRenderingContext2D, w: number, h: number): number | null {\n  const img = ctx.getImageData(0, 0, w, h);\n  const d = img.data;\n  const getY = (x: number, y: number) => {\n    const i = (y * w + x) * 4;\n    return luminanceOf(d[i], d[i + 1], d[i + 2]);\n  };\n\n  const findDarkest = (x0: number, x1: number, y0: number, y1: number) => {\n    let bestX = x0;\n    let bestY = y0;\n    let best = 1e9;\n    for (let y = y0; y < y1; y++) {\n      for (let x = x0; x < x1; x++) {\n        const Y = getY(x, y);\n        if (Y < best) {\n          best = Y;\n          bestX = x;\n          bestY = y;\n        }\n      }\n    }\n    return { x: bestX, y: bestY, Y: best };\n  };\n\n  const rx = Math.floor(w * 0.35);\n  const ry = Math.floor(h * 0.35);\n  const tl = findDarkest(0, rx, 0, ry);\n  const tr = findDarkest(w - rx, w, 0, ry);\n  const bl = findDarkest(0, rx, h - ry, h);\n  const br = findDarkest(w - rx, w, h - ry, h);\n\n  // sanity: standoff candidates should be \"dark enough\"\n  const darkEnough = (p: { Y: number }) => p.Y < 80;\n  if (![tl, tr, bl, br].every(darkEnough)) return null;\n\n  const topSpan = tr.x - tl.x;\n  const bottomSpan = br.x - bl.x;\n  const span = Math.round((topSpan + bottomSpan) / 2);\n  if (span < w * 0.3) return null;\n\n  // approximate: standoff centers are slightly inset from panel edges; compensate a bit\n  const pad = Math.round(w * 0.01); // ~1% of width\n  return span + pad * 2;\n}\n\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":["file:///Users/naoki/Projects/ai-sign-generator/neon-sign-maker/src/app/studio/studio-client.tsx"],"sourcesContent":["'use client';\n\nimport React from \"react\";\nimport UploadAndText from \"@/components/UploadAndText\";\nimport type { NeonColor } from \"@/lib/palette\";\nimport ColorPicker14Dynamic from \"@/components/ColorPicker14Dynamic\";\nimport NeonPreviewGrid from \"@/components/NeonPreviewGrid\";\nimport { NEON_PALETTE_14 } from \"@/lib/palette\";\nimport { getDefaultBackground } from \"@/lib/backgrounds\";\nimport { NEON_PROTOCOL_V1 } from \"@/lib/neonProtocol\";\nimport {\n  DEFAULT_YEN_PER_CM_TUBE,\n  estimatePriceYenExTaxFromTubeLength,\n  formatYen,\n} from \"@/lib/quote\";\nimport { estimateTubeLengthCmFromNeonPhoto } from \"@/lib/lineLength\";\n\nexport default function StudioClient() {\n  const [sketchDataUrl, setSketchDataUrl] = React.useState<string | null>(null);\n  const [text, setText] = React.useState(\"\");\n  const [colorCount, setColorCount] = React.useState<number>(3);\n  const [colors, setColors] = React.useState<NeonColor[]>(() => [\n    NEON_PALETTE_14[0],\n    NEON_PALETTE_14[5],\n    NEON_PALETTE_14[9],\n  ]);\n  const [widthMm, setWidthMm] = React.useState<number>(600);\n  const tubeDiameter = NEON_PROTOCOL_V1.defaultTubeDiameter;\n  const [isGenerating, setIsGenerating] = React.useState(false);\n  const [aiImageDataUrl, setAiImageDataUrl] = React.useState<string | null>(null);\n  const [aiError, setAiError] = React.useState<string | null>(null);\n  const [isEstimating, setIsEstimating] = React.useState(false);\n  const [tubeLengthCm, setTubeLengthCm] = React.useState<number | null>(null);\n  const [unitYenPerCm, setUnitYenPerCm] = React.useState<number>(DEFAULT_YEN_PER_CM_TUBE);\n  const [calibrationPriceYenExTax, setCalibrationPriceYenExTax] = React.useState<number>(82400);\n  const [calibrationWidthMm, setCalibrationWidthMm] = React.useState<number>(1000);\n\n  const canGenerate = Boolean(sketchDataUrl || text.trim());\n  const background = getDefaultBackground();\n\n  const priceYenExTax =\n    tubeLengthCm == null ? null : estimatePriceYenExTaxFromTubeLength(tubeLengthCm, unitYenPerCm);\n\n  // 単価をローカル保存（再起動しても維持）\n  React.useEffect(() => {\n    const stored = localStorage.getItem(\"neon-sign-maker-unit-yen-per-cm\");\n    if (!stored) return;\n    const n = Number(stored);\n    if (Number.isFinite(n) && n > 0) setUnitYenPerCm(n);\n  }, []);\n\n  React.useEffect(() => {\n    if (!Number.isFinite(unitYenPerCm) || unitYenPerCm <= 0) return;\n    localStorage.setItem(\"neon-sign-maker-unit-yen-per-cm\", String(unitYenPerCm));\n  }, [unitYenPerCm]);\n\n  // 色数変更に追従して配列を増減\n  React.useEffect(() => {\n    const n = Math.max(1, Math.min(5, colorCount));\n    setColors((prev) => {\n      if (prev.length === n) return prev;\n      if (prev.length > n) return prev.slice(0, n);\n      // 足りない分はパレット先頭から埋める（重複OK、ユーザーが後で変える）\n      const next = prev.slice();\n      while (next.length < n) next.push(NEON_PALETTE_14[Math.min(next.length, NEON_PALETTE_14.length - 1)]);\n      return next;\n    });\n  }, [colorCount]);\n\n  return (\n    <main className=\"min-h-screen bg-black text-white\">\n      <div className=\"mx-auto max-w-5xl px-6 py-16 space-y-6\">\n        <div className=\"flex items-center justify-between gap-4\">\n          <a href=\"/\" className=\"text-sm text-zinc-300 hover:text-white\">\n            ← 戻る\n          </a>\n          <div className=\"text-xs text-zinc-400\">\n            MVP: 設置イメージ（B）をリアルに生成\n          </div>\n        </div>\n\n        <header>\n          <h1 className=\"text-3xl font-bold\">Studio</h1>\n          <p className=\"mt-2 text-zinc-300\">\n            画像アップロード（手書き）とテキストを元に、リアルな設置イメージをAI生成します。\n            {`仕上がりは「φ${tubeDiameter}mm相当のネオンチューブ + 透明アクリルパネル挟み込み（表裏） + 四隅金具」を想定。`}\n          </p>\n        </header>\n\n        <UploadAndText\n          imageDataUrl={sketchDataUrl}\n          onImageChange={(next) => {\n            setSketchDataUrl(next);\n            setAiImageDataUrl(null);\n            setAiError(null);\n          }}\n          text={text}\n          onTextChange={(next) => {\n            setText(next);\n            setAiImageDataUrl(null);\n            setAiError(null);\n          }}\n        />\n\n        <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n          <div className=\"flex items-end justify-between gap-4\">\n            <div>\n              <h2 className=\"text-lg font-semibold\">サイズ（横幅）</h2>\n              <p className=\"mt-1 text-sm text-zinc-300\">\n                透明アクリル板の外寸（全体幅）を指定します。縦幅は文字/ロゴの形に合わせて自動調整します。\n              </p>\n            </div>\n            <div className=\"text-xs text-zinc-400\">現在: {widthMm}mm</div>\n          </div>\n          <div className=\"mt-4 flex items-center gap-3\">\n            <input\n              type=\"number\"\n              inputMode=\"numeric\"\n              min={200}\n              max={2000}\n              step={10}\n              value={widthMm}\n              onChange={(e) => {\n                const n = Number(e.target.value);\n                setWidthMm(Number.isFinite(n) ? n : 600);\n                setAiImageDataUrl(null);\n                setAiError(null);\n              }}\n              className=\"w-40 rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-300/60\"\n            />\n            <span className=\"text-sm text-zinc-300\">mm</span>\n            <span className=\"text-xs text-zinc-500\">（目安：400〜900mm）</span>\n          </div>\n        </div>\n\n        <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n          <div className=\"flex items-end justify-between gap-4\">\n            <div>\n              <h2 className=\"text-lg font-semibold\">色数</h2>\n              <p className=\"mt-1 text-sm text-zinc-300\">まず色数（上限5色）を選んでください。</p>\n            </div>\n            <div className=\"text-xs text-zinc-400\">現在: {colorCount}色</div>\n          </div>\n          <div className=\"mt-4 flex flex-wrap gap-2\">\n            {[1, 2, 3, 4, 5].map((n) => (\n              <button\n                key={n}\n                type=\"button\"\n                onClick={() => {\n                  setColorCount(n);\n                  setAiImageDataUrl(null);\n                  setAiError(null);\n                }}\n                className={[\n                  \"rounded-full px-4 py-2 text-sm font-semibold transition-colors\",\n                  colorCount === n ? \"bg-white text-black\" : \"bg-white/10 text-zinc-200 hover:bg-white/15\",\n                ].join(\" \")}\n              >\n                {n}色\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <ColorPicker14Dynamic\n          palette={NEON_PALETTE_14}\n          colors={colors}\n          maxColors={5}\n          onChange={(next) => {\n            setColors(next);\n            setAiImageDataUrl(null);\n            setAiError(null);\n          }}\n        />\n\n        <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n          <div className=\"flex items-center justify-between gap-3\">\n            <div>\n              <h2 className=\"text-lg font-semibold\">AIでリアルに生成</h2>\n              <p className=\"mt-1 text-sm text-zinc-300\">\n                商品写真のような設置イメージを1枚生成します（ネオンチューブ＋透明アクリル＋四隅金具）。\n              </p>\n            </div>\n            <button\n              type=\"button\"\n              disabled={!canGenerate || isGenerating}\n              onClick={async () => {\n                if (!canGenerate) return;\n                setIsGenerating(true);\n                setAiError(null);\n                setTubeLengthCm(null);\n                setIsEstimating(true);\n                try {\n                  // 1) AI生成（サーバー側）\n                  const resp = await fetch(\"/api/neon/generate\", {\n                    method: \"POST\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify({\n                      sketchDataUrl,\n                      text,\n                      colors,\n                      widthMm,\n                      tubeDiameter,\n                    }),\n                  });\n                  const data = await resp.json();\n                  if (!resp.ok) throw new Error(data?.error || \"生成に失敗しました\");\n                  setAiImageDataUrl(data.imageDataUrl);\n\n                  // 2) 生成された“設置写真”からチューブ長推定（ユーザー要件に合わせる）\n                  const est = await estimateTubeLengthCmFromNeonPhoto({\n                    imageDataUrl: data.imageDataUrl,\n                    targetWidthMm: widthMm,\n                  });\n                  setTubeLengthCm(est.tubeLengthCm);\n                } catch (e) {\n                  setAiError(e instanceof Error ? e.message : \"生成に失敗しました\");\n                } finally {\n                  setIsGenerating(false);\n                  setIsEstimating(false);\n                }\n              }}\n              className={[\n                \"rounded-full px-5 py-2 text-sm font-semibold transition-colors\",\n                !canGenerate || isGenerating\n                  ? \"bg-white/10 text-zinc-500 cursor-not-allowed\"\n                  : \"bg-fuchsia-300 text-black hover:bg-fuchsia-200\",\n              ].join(\" \")}\n            >\n              {isGenerating ? \"生成中...\" : \"リアル設置イメージを生成\"}\n            </button>\n          </div>\n\n          {!canGenerate && (\n            <p className=\"mt-3 text-xs text-zinc-400\">※ 手書きをアップロードするか、テキストを入力してください。</p>\n          )}\n          {aiError && <p className=\"mt-3 text-sm text-red-300\">{aiError}</p>}\n        </div>\n\n        {aiImageDataUrl && (\n          <>\n            <NeonPreviewGrid\n              templates={[background]}\n              text={text}\n              sketchDataUrl={sketchDataUrl}\n              colors={colors}\n              aiImageDataUrl={aiImageDataUrl}\n            />\n\n            <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n              <div className=\"flex items-baseline justify-between gap-3\">\n                <p className=\"text-lg font-semibold\">見積（税別）</p>\n                <p className=\"text-2xl font-bold text-fuchsia-200\">\n                  {priceYenExTax == null ? \"—\" : `¥${formatYen(priceYenExTax)}`}\n                </p>\n              </div>\n              <div className=\"mt-3 grid gap-1 text-sm text-zinc-300\">\n                <p>・横幅: {Math.round(widthMm)}mm</p>\n                <p>\n                  ・推定チューブ長:{\" \"}\n                  {isEstimating || tubeLengthCm == null ? \"計算中...\" : `${tubeLengthCm.toFixed(0)}cm`}\n                  （AI生成“設置写真”の発光部から推定）\n                </p>\n                <p>・単価: ¥{formatYen(unitYenPerCm)} / cm</p>\n              </div>\n              <div className=\"mt-4 flex flex-wrap items-center gap-2\">\n                <button\n                  type=\"button\"\n                  disabled={\n                    isEstimating ||\n                    tubeLengthCm == null ||\n                    tubeLengthCm <= 0 ||\n                    Math.abs(widthMm - calibrationWidthMm) > 1\n                  }\n                  onClick={() => {\n                    if (tubeLengthCm == null || tubeLengthCm <= 0) return;\n                    // サンプル画像（この推定ロジック）から単価を確定：\n                    // 単価（円/cm）= サンプル価格 / 推定チューブ長(cm)\n                    const unit = calibrationPriceYenExTax / tubeLengthCm;\n                    if (Number.isFinite(unit) && unit > 0) setUnitYenPerCm(unit);\n                  }}\n                  className={[\n                    \"rounded-full px-4 py-2 text-sm font-semibold transition-colors\",\n                    !(\n                      isEstimating ||\n                      tubeLengthCm == null ||\n                      tubeLengthCm <= 0 ||\n                      Math.abs(widthMm - calibrationWidthMm) > 1\n                    )\n                      ? \"bg-white text-black hover:bg-zinc-200\"\n                      : \"bg-white/10 text-zinc-500 cursor-not-allowed\",\n                  ].join(\" \")}\n                >\n                  単価を固定（サンプルから算出）\n                </button>\n                {Math.abs(widthMm - calibrationWidthMm) > 1 && (\n                  <span className=\"text-xs text-zinc-400\">※横幅をサンプルと同じにしてから押してください</span>\n                )}\n                <button\n                  type=\"button\"\n                  onClick={() => setUnitYenPerCm(DEFAULT_YEN_PER_CM_TUBE)}\n                  className=\"rounded-full bg-white/10 px-4 py-2 text-sm font-semibold text-zinc-200 hover:bg-white/15\"\n                >\n                  単価を初期値に戻す\n                </button>\n              </div>\n              <div className=\"mt-4 grid gap-3 sm:grid-cols-2\">\n                <div>\n                  <label className=\"text-sm font-semibold\">サンプル価格（税別）</label>\n                  <div className=\"mt-2 flex items-center gap-2\">\n                    <span className=\"text-sm text-zinc-300\">¥</span>\n                    <input\n                      type=\"number\"\n                      inputMode=\"numeric\"\n                      min={1}\n                      step={100}\n                      value={calibrationPriceYenExTax}\n                      onChange={(e) => setCalibrationPriceYenExTax(Number(e.target.value) || 82400)}\n                      className=\"w-40 rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-300/60\"\n                    />\n                  </div>\n                </div>\n                <div>\n                  <label className=\"text-sm font-semibold\">サンプル横幅（mm）</label>\n                  <div className=\"mt-2 flex items-center gap-2\">\n                    <input\n                      type=\"number\"\n                      inputMode=\"numeric\"\n                      min={200}\n                      max={2000}\n                      step={10}\n                      value={calibrationWidthMm}\n                      onChange={(e) => setCalibrationWidthMm(Number(e.target.value) || 1000)}\n                      className=\"w-40 rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-300/60\"\n                    />\n                    <span className=\"text-sm text-zinc-300\">mm</span>\n                  </div>\n                </div>\n              </div>\n              <p className=\"mt-2 text-[11px] text-zinc-400\">\n                ※「単価を固定」は、サンプル（例：横幅1000mmで¥82,400税別）をこの推定方法で計測し、\n                そこから円/cmを算出して固定します（ブラウザに保存）。\n              </p>\n            </div>\n          </>\n        )}\n      </div>\n    </main>\n  );\n}\n\n\n"],"names":[],"mappings":"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"}}]
}